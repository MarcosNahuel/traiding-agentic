# ğŸ“± Frontend Pages Development Plan

## Overview
This document outlines the implementation plan for the 5 missing frontend pages referenced in the homepage dashboard.

**Status:** ğŸ“ Planning Phase
**Priority:** Medium (after Supabase fix)
**Estimated Time:** 4-6 hours total

---

## ğŸ¯ Pages to Build

### âœ… Completed
- [x] **Homepage (/)** - Dashboard with navigation cards

### ğŸš§ To Build
- [ ] **/sources** - Sources management page
- [ ] **/strategies** - Strategies browser
- [ ] **/guides** - Trading guides viewer
- [ ] **/chat** - AI chat interface
- [ ] **/logs** - Agent activity logs

---

## ğŸ“ Design System

### Style Guidelines
- **Theme:** Continue dark gradient aesthetic from homepage
- **Colors:**
  - Background: `from-gray-900 via-black to-gray-900`
  - Cards: `bg-gray-800/50 backdrop-blur-xl`
  - Accents: `from-blue-500 to-purple-600`
- **Layout:** Full-width containers with max-width constraints
- **Typography:** System fonts with clear hierarchy

### Reusable Components to Create

```typescript
// components/ui/PageHeader.tsx
interface PageHeaderProps {
  title: string;
  description: string;
  action?: React.ReactNode;
}

// components/ui/DataTable.tsx
interface DataTableProps<T> {
  data: T[];
  columns: Column<T>[];
  isLoading: boolean;
  emptyState: React.ReactNode;
}

// components/ui/StatusBadge.tsx
interface StatusBadgeProps {
  status: 'pending' | 'approved' | 'rejected' | 'processing' | 'error';
}

// components/ui/LoadingCard.tsx
// Skeleton loader matching card style
```

---

## ğŸ“„ Page 1: Sources (/sources)

### Purpose
Display and manage all paper sources submitted for evaluation.

### Key Features
1. **Table View:**
   - URL (with favicon)
   - Title
   - Source Type (paper/article/repo/book/video)
   - Status badge (pending/evaluating/approved/rejected/error)
   - Scores (relevance, credibility, applicability)
   - Actions (view details, re-evaluate, delete)

2. **Add Source Form:**
   - Modal or slide-out panel
   - URL input
   - Source type dropdown
   - Submit button triggers POST /api/sources

3. **Filters:**
   - By status
   - By source type
   - By score range
   - Search by title/URL

4. **Empty State:**
   - "No sources yet" message
   - Call-to-action button to add first source

### API Integration
```typescript
// Fetch sources
GET /api/sources?status={status}&type={type}&limit=50&offset=0

// Add source
POST /api/sources
Body: { url: string, sourceType: string }

// Delete source
DELETE /api/sources/[id]

// Re-evaluate
POST /api/sources/[id]/evaluate
```

### File Structure
```
app/sources/
  â”œâ”€â”€ page.tsx              # Main sources list page
  â”œâ”€â”€ [id]/
  â”‚   â””â”€â”€ page.tsx          # Source detail view
  â””â”€â”€ components/
      â”œâ”€â”€ SourcesTable.tsx
      â”œâ”€â”€ AddSourceModal.tsx
      â””â”€â”€ SourceCard.tsx    # Mobile view
```

---

## ğŸ“Š Page 2: Strategies (/strategies)

### Purpose
Browse and filter extracted trading strategies from approved papers.

### Key Features
1. **Card Grid View:**
   - Strategy name
   - Strategy type badge (momentum/mean_reversion/etc)
   - Market & timeframe
   - Confidence score (1-10)
   - Evidence strength (weak/moderate/strong)
   - Source paper reference

2. **Strategy Detail Modal:**
   - Full description
   - Entry rules (list)
   - Exit rules (list)
   - Indicators used
   - Backtest results (if available)
   - Best/worst market conditions
   - Limitations

3. **Filters:**
   - By strategy type
   - By market (BTC/ETH/etc)
   - By timeframe
   - By confidence (slider 1-10)
   - By evidence strength
   - Search by name

4. **Compare Mode:**
   - Select multiple strategies
   - Side-by-side comparison table

### API Integration
```typescript
// Fetch strategies
GET /api/strategies?type={type}&market={market}&minConfidence={score}

// Get strategy details
GET /api/strategies/[id]
```

### File Structure
```
app/strategies/
  â”œâ”€â”€ page.tsx              # Main strategies list
  â”œâ”€â”€ [id]/
  â”‚   â””â”€â”€ page.tsx          # Strategy detail view
  â””â”€â”€ components/
      â”œâ”€â”€ StrategyGrid.tsx
      â”œâ”€â”€ StrategyCard.tsx
      â”œâ”€â”€ StrategyDetailModal.tsx
      â””â”€â”€ StrategyFilters.tsx
```

---

## ğŸ“– Page 3: Guides (/guides)

### Purpose
View and download synthesized trading guides generated by the Synthesis Agent.

### Key Features
1. **Guide List:**
   - Version number
   - Creation date
   - Confidence score
   - Number of sources used
   - Number of strategies included
   - Primary strategy highlight

2. **Guide Viewer:**
   - Markdown rendering with syntax highlighting
   - Table of contents (auto-generated from headings)
   - Collapsible sections
   - Download as PDF/MD
   - Share link

3. **Guide Sections:**
   - Executive Summary
   - Primary Strategy (detailed)
   - Secondary Strategies
   - Market Conditions Map
   - Risk Parameters
   - Avoid List
   - Common Patterns
   - Contradictions Resolved
   - Limitations

4. **Version Comparison:**
   - Compare two guide versions
   - Highlight changes

### API Integration
```typescript
// Fetch guides
GET /api/guides

// Get specific guide
GET /api/guides/[id]

// Trigger new synthesis
POST /api/guides/synthesize
Body: { minConfidence: number, minEvidenceStrength: string }
```

### File Structure
```
app/guides/
  â”œâ”€â”€ page.tsx              # Guides list
  â”œâ”€â”€ [id]/
  â”‚   â””â”€â”€ page.tsx          # Guide viewer
  â”œâ”€â”€ compare/
  â”‚   â””â”€â”€ page.tsx          # Compare versions
  â””â”€â”€ components/
      â”œâ”€â”€ GuideCard.tsx
      â”œâ”€â”€ GuideMarkdown.tsx
      â”œâ”€â”€ TableOfContents.tsx
      â””â”€â”€ SynthesizeButton.tsx
```

---

## ğŸ’¬ Page 4: Chat (/chat)

### Purpose
Interactive AI chat interface for asking questions about strategies and getting advice.

### Key Features
1. **Chat Interface:**
   - Message history (user messages, AI responses)
   - Input field with send button
   - Auto-scroll to latest message
   - Typing indicator when AI is responding

2. **Suggested Questions:**
   - "What's the best strategy for high volatility?"
   - "Compare momentum vs mean reversion"
   - "What indicators work best for BTC?"

3. **Context Awareness:**
   - Chat agent has access to all processed papers
   - Can reference specific strategies and guides
   - Shows source citations

4. **Message Features:**
   - Markdown rendering in responses
   - Code blocks for strategy examples
   - Copy message button
   - Thumbs up/down feedback

### API Integration
```typescript
// Send message
POST /api/chat
Body: { message: string, conversationId?: string }

Response: {
  response: string,
  conversationId: string,
  sources?: Array<{sourceId: string, title: string}>
}
```

### File Structure
```
app/chat/
  â”œâ”€â”€ page.tsx              # Chat interface
  â””â”€â”€ components/
      â”œâ”€â”€ MessageList.tsx
      â”œâ”€â”€ MessageBubble.tsx
      â”œâ”€â”€ ChatInput.tsx
      â”œâ”€â”€ SuggestedQuestions.tsx
      â””â”€â”€ TypingIndicator.tsx
```

---

## ğŸ“‹ Page 5: Logs (/logs)

### Purpose
Monitor agent activity, track API usage, and debug issues.

### Key Features
1. **Activity Timeline:**
   - Chronological list of agent actions
   - Agent icon/color coding (source/reader/synthesis/chat)
   - Timestamp
   - Action type
   - Status (started/success/error/warning)
   - Duration
   - Token usage

2. **Log Details Expandable:**
   - Input summary
   - Output summary
   - Reasoning
   - Error message (if failed)
   - Model used
   - Cost estimate

3. **Filters:**
   - By agent type
   - By status
   - By date range
   - By source (if applicable)

4. **Stats Dashboard:**
   - Total API calls today
   - Total tokens used
   - Estimated costs
   - Success rate
   - Average processing time

5. **Export:**
   - Download logs as CSV
   - Filter and export specific date range

### API Integration
```typescript
// Fetch logs
GET /api/logs?agent={agent}&status={status}&limit=100&offset=0

// Get log details
GET /api/logs/[id]
```

### File Structure
```
app/logs/
  â”œâ”€â”€ page.tsx              # Main logs view
  â””â”€â”€ components/
      â”œâ”€â”€ LogTimeline.tsx
      â”œâ”€â”€ LogCard.tsx
      â”œâ”€â”€ LogFilters.tsx
      â”œâ”€â”€ StatsWidget.tsx
      â””â”€â”€ ExportButton.tsx
```

---

## ğŸ¨ Common UI Components Library

Before building pages, create these reusable components:

```typescript
// components/ui/Button.tsx
// Primary, secondary, danger variants
// Loading state

// components/ui/Card.tsx
// Glassmorphic card with consistent styling

// components/ui/Badge.tsx
// Status badges with color coding

// components/ui/Input.tsx
// Text input with validation states

// components/ui/Select.tsx
// Dropdown select with search

// components/ui/Modal.tsx
// Accessible modal overlay

// components/ui/Tooltip.tsx
// Hover tooltips

// components/ui/EmptyState.tsx
// Consistent empty state designs

// components/ui/ErrorState.tsx
// Error message display

// components/ui/LoadingSpinner.tsx
// Loading indicators

// components/ui/Skeleton.tsx
// Loading skeletons for data
```

---

## ğŸ› ï¸ Implementation Strategy

### Phase 1: Foundation (1 hour)
1. Create UI components library
2. Set up error handling utilities
3. Create data fetching hooks
4. Set up TypeScript types

### Phase 2: Core Pages (2-3 hours)
Priority order:
1. **/sources** (most critical - data entry)
2. **/strategies** (browse extracted strategies)
3. **/guides** (view synthesized output)

### Phase 3: Interactive Pages (1-2 hours)
4. **/logs** (monitoring and debugging)
5. **/chat** (AI interaction)

### Phase 4: Polish (30 min - 1 hour)
- Loading states
- Error boundaries
- Mobile responsiveness
- Accessibility (ARIA labels, keyboard nav)
- SEO meta tags

---

## ğŸ“¦ Required Dependencies

```json
{
  "dependencies": {
    "react-markdown": "^9.0.0",        // Markdown rendering
    "remark-gfm": "^4.0.0",            // GitHub flavored markdown
    "date-fns": "^3.0.0",              // Date formatting
    "recharts": "^2.10.0"              // Charts for logs stats (optional)
  },
  "devDependencies": {
    "@types/react-markdown": "^9.0.0"
  }
}
```

---

## ğŸš€ Getting Started

### Step 1: Install Dependencies
```bash
npm install react-markdown remark-gfm date-fns
```

### Step 2: Create UI Components
```bash
mkdir -p components/ui
# Create Button, Card, Badge, etc.
```

### Step 3: Build First Page
```bash
mkdir -p app/sources
# Start with sources/page.tsx
```

### Step 4: Test & Iterate
- Test with real data from API
- Handle loading/error states
- Make responsive
- Add animations

---

## ğŸ§ª Testing Checklist

For each page:
- [ ] Loads successfully
- [ ] Fetches data from API
- [ ] Displays loading state
- [ ] Handles empty state
- [ ] Handles error state
- [ ] Responsive on mobile
- [ ] Keyboard accessible
- [ ] Works with real data
- [ ] No console errors

---

## ğŸ“ Code Example: Sources Page Starter

```typescript
// app/sources/page.tsx
"use client";

import { useEffect, useState } from "react";
import { PageHeader } from "@/components/ui/PageHeader";
import { Button } from "@/components/ui/Button";
import { SourcesTable } from "./components/SourcesTable";
import { AddSourceModal } from "./components/AddSourceModal";

interface Source {
  id: string;
  url: string;
  title: string;
  source_type: string;
  status: string;
  overall_score: number;
  created_at: string;
}

export default function SourcesPage() {
  const [sources, setSources] = useState<Source[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [isModalOpen, setIsModalOpen] = useState(false);

  useEffect(() => {
    fetchSources();
  }, []);

  const fetchSources = async () => {
    try {
      setIsLoading(true);
      const res = await fetch("/api/sources");
      const data = await res.json();
      setSources(data.sources);
    } catch (error) {
      console.error("Failed to fetch sources:", error);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900">
      <div className="max-w-7xl mx-auto px-4 py-12">
        <PageHeader
          title="Paper Sources"
          description="Manage trading research papers and sources"
          action={
            <Button onClick={() => setIsModalOpen(true)}>
              + Add Source
            </Button>
          }
        />

        <div className="mt-8">
          <SourcesTable sources={sources} isLoading={isLoading} />
        </div>

        <AddSourceModal
          isOpen={isModalOpen}
          onClose={() => setIsModalOpen(false)}
          onSuccess={fetchSources}
        />
      </div>
    </div>
  );
}
```

---

## ğŸ¯ Success Criteria

Frontend is complete when:
- [ ] All 5 pages are accessible and functional
- [ ] Data flows correctly from API to UI
- [ ] Error handling is robust
- [ ] UI matches the homepage design aesthetic
- [ ] Mobile responsive
- [ ] No TypeScript errors
- [ ] No console errors in production

---

## ğŸ“š Resources

- **Design inspiration:** Homepage (/)
- **API documentation:** Check route files in `app/api/`
- **Database schema:** `supabase/migrations/`
- **Type definitions:** Create in `types/` directory

---

**Document Version:** 1.0
**Last Updated:** February 16, 2026
**Status:** Ready for implementation
